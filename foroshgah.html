<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø³ÙØ§Ø±Ø´ Ø¸Ø±ÙˆÙ ÛŒÚ©Ø¨Ø§Ø± Ù…ØµØ±Ù - ÙØ§Ú©ØªÙˆØ± Ù…ÙˆØ¨Ø§ÛŒÙ„</title>
<style>
  body{font-family:Tahoma,Arial,sans-serif;background:#f7f7f7;margin:0;padding:16px;direction:rtl;}
  .app{max-width:700px;margin:0 auto;}
  header{text-align:center;margin-bottom:20px;}
  h1{font-size:1.5rem;color:#333;}
  .card{background:#fff;border-radius:10px;padding:15px;margin-bottom:15px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
  input[type=text], input[type=number]{width:100%;padding:8px;margin-top:5px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;}
  button{background:#4CAF50;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;margin-top:5px;}
  button.secondary{background:#1976d2;}
  .products{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;}
  .product{border:1px solid #eee;padding:10px;border-radius:8px;text-align:center;}
  .product .name{font-weight:600;margin-bottom:5px;}
  .product .price{color:#666;margin-bottom:5px;}
  table{width:100%;border-collapse:collapse;margin-top:10px;font-size:0.95rem;}
  th, td{border:1px solid #ddd;padding:8px;text-align:center;}
  .grand-total{font-weight:bold;margin-top:10px;text-align:right;}
  .actions{display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-end;margin-top:10px;}
  .final-note{border:2px solid red;color:red;font-weight:bold;padding:10px;margin-top:15px;text-align:center;font-size:1rem;line-height:1.8;}
  @media(max-width:480px){table, th, td{font-size:0.85rem;}}
</style>
</head>
<body>
<div class="app">
  <header>
    <h1>Ø³ÙØ§Ø±Ø´ Ø¸Ø±ÙˆÙ ÛŒÚ©Ø¨Ø§Ø± Ù…ØµØ±Ù</h1>
  </header>

  <div class="card">
    <strong>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø±ÛŒØ¯Ø§Ø±</strong>
    <div style="margin-top:10px;">
      <input type="text" id="firstName" placeholder="Ù†Ø§Ù…">
      <input type="text" id="lastName" placeholder="Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ">
      <input type="text" id="address" placeholder="Ø¢Ø¯Ø±Ø³ Ù…Ø­Ù„ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ù„Ø§">
      <input type="text" id="mobile" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„">
    </div>
  </div>

  <div class="card">
    <strong>Ù…Ù†ÙˆÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª</strong>
    <div class="products" id="products"></div>
  </div>

  <div class="card">
    <strong>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</strong>
    <div id="cartEmpty" style="color:#666;margin-top:8px;">Ù‡Ù†ÙˆØ² Ú†ÛŒØ²ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</div>
    <div id="cartArea" style="display:none;">
      <table id="cartTable">
        <thead>
          <tr><th>Ø±Ø¯ÛŒÙ</th><th>Ù…Ø­ØµÙˆÙ„</th><th>ØªØ¹Ø¯Ø§Ø¯</th><th>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯</th><th>Ø¬Ù…Ø¹</th><th>Ø­Ø°Ù</th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="grand-total">Ù…Ø¨Ù„Øº Ú©Ù„: <span id="grandTotal">0</span> ØªÙˆÙ…Ø§Ù†</div>
      <div class="actions">
        <button id="clearCartBtn" class="secondary">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯</button>
        <button id="downloadBtn">Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§Ú©ØªÙˆØ± (HTML)</button>
      </div>
    </div>
  </div>
</div>

<script>
const products = [
  {id:1,name:"Ù„ÛŒÙˆØ§Ù†",price:500},
  {id:2,name:"Ø¨Ø´Ù‚Ø§Ø¨",price:1000},
  {id:3,name:"Ù‚Ø§Ø´Ù‚",price:300},
  {id:4,name:"Ú†Ù†Ú¯Ø§Ù„",price:400},
  {id:5,name:"Ø¸Ø±Ù Ø³Ø§Ù„Ø§Ø¯",price:1200}
];

let cart = [];
const productsEl = document.getElementById('products');
const cartArea = document.getElementById('cartArea');
const cartEmpty = document.getElementById('cartEmpty');
const cartTableBody = document.querySelector('#cartTable tbody');
const grandTotalEl = document.getElementById('grandTotal');

function fmt(n){ return n.toLocaleString('fa-IR'); }

function renderProducts(){
  products.forEach(p=>{
    const div = document.createElement('div');
    div.className="product";
    div.innerHTML = `<div class="name">${p.name}</div><div class="price">${fmt(p.price)} ØªÙˆÙ…Ø§Ù†</div>
    <input type="number" min="1" value="1" id="qty-${p.id}">
    <button onclick="addToCart(${p.id})">Ø§ÙØ²ÙˆØ¯Ù†</button>`;
    productsEl.appendChild(div);
  });
}

function addToCart(id){
  const firstName = document.getElementById('firstName').value.trim();
  const lastName = document.getElementById('lastName').value.trim();
  const address = document.getElementById('address').value.trim();
  const mobile = document.getElementById('mobile').value.trim();
  if(!firstName||!lastName||!address||!mobile){alert("Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø±ÛŒØ¯Ø§Ø± Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ù†ÛŒØ¯."); return;}
  const p=products.find(x=>x.id===id);
  const qty=parseInt(document.getElementById('qty-'+id).value)||1;
  let item=cart.find(x=>x.id===id);
  if(item){item.qty+=qty;item.subtotal=item.qty*item.price;}else{cart.push({id:p.id,name:p.name,price:p.price,qty:qty,subtotal:p.price*qty});}
  renderCart();
}

function removeFromCart(id){cart=cart.filter(x=>x.id!==id);renderCart();}
function renderCart(){
  if(cart.length===0){cartArea.style.display="none";cartEmpty.style.display="block";return;}
  cartArea.style.display="block";cartEmpty.style.display="none";
  cartTableBody.innerHTML=""; let grand=0;
  cart.forEach((it,i)=>{grand+=it.subtotal;
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${i+1}</td><td>${it.name}</td><td>${it.qty}</td><td>${fmt(it.price)}</td><td>${fmt(it.subtotal)}</td><td><button onclick="removeFromCart(${it.id})">X</button></td>`;
    cartTableBody.appendChild(tr);
  });
  grandTotalEl.textContent=fmt(grand);
}

document.getElementById('clearCartBtn').onclick=()=>{cart=[];renderCart();};

document.getElementById('downloadBtn').onclick=()=>{
  if(cart.length===0){alert("Ø³Ø¨Ø¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª");return;}
  const firstName = document.getElementById('firstName').value.trim();
  const lastName = document.getElementById('lastName').value.trim();
  const address = document.getElementById('address').value.trim();
  const mobile = document.getElementById('mobile').value.trim();
  if(!firstName||!lastName||!address||!mobile){alert("Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®Ø±ÛŒØ¯Ø§Ø± Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ù†ÛŒØ¯."); return;}
  let rows="",grand=0;
  cart.forEach((it,i)=>{grand+=it.subtotal;rows+=`<tr><td>${i+1}</td><td>${it.name}</td><td>${it.qty}</td><td>${fmt(it.price)}</td><td>${fmt(it.subtotal)}</td></tr>`;});
  const now = new Date().toLocaleString("fa-IR");
  const html=`<!doctype html><html lang="fa" dir="rtl"><head><meta charset="utf-8"><title>ÙØ§Ú©ØªÙˆØ±</title>
  <style>body{font-family:Tahoma,Arial,sans-serif;padding:10px;} table{width:100%;border-collapse:collapse;font-size:0.95rem;} th,td{border:1px solid #ddd;padding:8px;text-align:center;} .grand-total{text-align:right;font-weight:bold;margin-top:10px;} .final-note{border:2px solid red;color:red;font-weight:bold;padding:10px;text-align:center;margin-top:15px;font-size:1rem;line-height:1.8;}</style>
  </head><body>
  <h2>ÙØ§Ú©ØªÙˆØ± Ø³ÙØ§Ø±Ø´</h2>
  <p>Ù†Ø§Ù… Ø®Ø±ÛŒØ¯Ø§Ø±: ${firstName} ${lastName}</p>
  <p>Ø¢Ø¯Ø±Ø³: ${address}</p>
  <p>Ù…ÙˆØ¨Ø§ÛŒÙ„: <span dir="ltr">${mobile}</span></p>
  <p>ØªØ§Ø±ÛŒØ®: ${now}</p>
  <table><tr><th>Ø±Ø¯ÛŒÙ</th><th>Ù…Ø­ØµÙˆÙ„</th><th>ØªØ¹Ø¯Ø§Ø¯</th><th>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯</th><th>Ø¬Ù…Ø¹</th></tr>
  ${rows}
  <tr><td colspan="4">Ù…Ø¨Ù„Øº Ú©Ù„</td><td>${fmt(grand)}</td></tr></table>
  <div class="final-note">
    Ø§ÛŒÙ† ÙØ§Ú©ØªÙˆØ± Ù†Ù‡Ø§ÛŒÛŒ Ø§Ø³Øª Ùˆ Ø¬Ù‡Øª Ø³ÙØ§Ø±Ø´ Ù†Ù‡Ø§ÛŒÛŒ Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯. <br><br>
    âœ… Ù„Ø·ÙØ§Ù‹ ØªØµÙˆÛŒØ± Ø§ÛŒÙ† ÙØ§Ú©ØªÙˆØ± Ø±Ø§ Ú¯Ø±ÙØªÙ‡ Ùˆ Ø¨Ø±Ø§ÛŒ 
    <a href="https://wa.me/989374657597" target="_blank">ÙˆØ§ØªØ³â€ŒØ§Ù¾</a> ÛŒØ§ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ù‡ Ø´Ù…Ø§Ø±Ù‡ 
    <strong><span dir="ltr">09374657597</span></strong> Ø§Ø±Ø³Ø§Ù„ Ù†Ù…Ø§ÛŒÛŒØ¯. <br><br>
    ğŸ’³ Ø¨Ø¹Ø¯ Ø§Ø² ÙˆØ§Ø±ÛŒØ² Ù…Ø¨Ù„Øº Ø¨Ù‡ Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª 
    <strong><span dir="ltr">6104-3375-6060-3225</span></strong>ØŒ Ù„Ø·ÙØ§Ù‹ ØªØµÙˆÛŒØ± Ú©Ø§Ø±Øªâ€ŒØ¨Ù‡â€ŒÚ©Ø§Ø±Øª Ø±Ø§ Ù‡Ù… Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ ÙØ§Ú©ØªÙˆØ± Ø³ÙØ§Ø±Ø´ Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù…Ø§ÛŒÛŒØ¯. <br><br>
    ğŸ“· Ø¬Ù‡Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªØµØ§ÙˆÛŒØ± Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ù‡ Ù¾ÛŒØ¬ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù… 
    <a href="https://instagram.com/vahidn.sh" target="_blank"><span dir="ltr">@vahidn.sh</span></a> Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ù†Ù…Ø§ÛŒÛŒØ¯.
  </div>
  <p>Ù…Ù…Ù†ÙˆÙ† Ø§Ø² Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ ğŸŒ¹</p>
  </body></html>`;
  const blob=new Blob([html],{type:"text/html;charset=utf-8"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="faktor_mobile.html";
  a.click();
};

renderProducts();
renderCart();
</script>
</body>
</html>
